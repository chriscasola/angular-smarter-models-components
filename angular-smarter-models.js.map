{"version":3,"sources":["module.ts","model-wrapper.ts","model-instance.ts","model.ts","model-list-item-instance.ts","model-data-retriever.ts","model-factory.ts"],"names":["AngularSmarterModels","AngularSmarterModels.ModelInstance","AngularSmarterModels.ModelInstance.constructor","AngularSmarterModels.ModelInstance.props","AngularSmarterModels.ModelInstance.serialize","AngularSmarterModels.ModelInstance.merge","AngularSmarterModels.ModelInstance.setModelPath","AngularSmarterModels.ModelInstance.getModelPath","AngularSmarterModels.ModelInstance.save","AngularSmarterModels.ModelInstance.delete","AngularSmarterModels.Model","AngularSmarterModels.Model.constructor","AngularSmarterModels.Model.get","AngularSmarterModels.Model.getAsync","AngularSmarterModels.Model.list","AngularSmarterModels.Model.listAsync","AngularSmarterModels.Model.create","AngularSmarterModels.ModelListItemInstance","AngularSmarterModels.ModelListItemInstance.constructor","AngularSmarterModels.ModelListItemInstance.config","AngularSmarterModels.ModelListItemInstance.props","AngularSmarterModels.ModelDataRetrieverError","AngularSmarterModels.ModelDataRetrieverError.constructor","AngularSmarterModels.buildUrl","AngularSmarterModels.ModelDataRetriever","AngularSmarterModels.ModelDataRetriever.constructor","AngularSmarterModels.ModelDataRetriever.cacheModel","AngularSmarterModels.ModelDataRetriever.cacheList","AngularSmarterModels.ModelDataRetriever.addModelToList","AngularSmarterModels.ModelDataRetriever.removeModelFromList","AngularSmarterModels.ModelDataRetriever.get","AngularSmarterModels.ModelDataRetriever.getAsync","AngularSmarterModels.ModelDataRetriever.getMultiple","AngularSmarterModels.ModelDataRetriever.list","AngularSmarterModels.ModelDataRetriever.listAsync","AngularSmarterModels.ModelDataRetriever.save","AngularSmarterModels.ModelDataRetriever.create","AngularSmarterModels.ModelDataRetriever.delete","AngularSmarterModels.ModelBuilder","AngularSmarterModels.ModelBuilder.constructor","AngularSmarterModels.ModelBuilder.model","AngularSmarterModels.ModelBuilder.modelInstance","AngularSmarterModels.ModelBuilder.modelDataRetriever","AngularSmarterModels.ModelBuilder.listPath","AngularSmarterModels.ModelBuilder.idField","AngularSmarterModels.ModelBuilder.done","AngularSmarterModels.modelFactory"],"mappings":"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AACA,IAAIA,CAACA,SAASA,CAACA,cAAcA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA;gBAC5CA,IAAMA,SAASA,GAAGA,IAAIA,CAACA,SAASA,CAACA,QAAQA,CAACA,CAACA;gBAC3CA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;oBAC1CA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,KAAKA,CAACA,KAAKA,CAACA,MAAMA,CAACA,OAAOA,CAACA,KAAKA,KAAKA,CAACA,KAAKA,CAACA,KAAKA,CAACA,MAAMA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA;wBACnFA,SAASA,CAACA,CAACA,CAACA,GAAGA,KAAKA,CAACA;wBACrBA,MAAMA,CAACA;oBACTA,CAACA;gBACHA,CAACA;gBACDA,IAAIA,CAACA,SAASA,CAACA,QAAQA,CAACA,CAACA,MAAMA,CAACA,QAAQA,EAAEA,CAACA,EAAEA,KAAKA,CAACA,CAACA;YACtDA,CAACA;QACHA,CAACA;QAEOJ,gDAAmBA,GAA3BA,UAA4BA,QAAgBA,EAAEA,OAAeA,EAAEA,gBAAwBA;YACrFK,IAAMA,SAASA,GAAGA,IAAIA,CAACA,SAASA,CAACA,QAAQA,CAACA,CAACA;YAC3CA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;gBAC1CA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,KAAKA,CAACA,gBAAgBA,CAACA,KAAKA,OAAOA,CAACA,CAACA,CAACA;oBACrDA,SAASA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;oBACvBA,KAAKA,CAACA;gBACRA,CAACA;YACHA,CAACA;QACHA,CAACA;QAEDL,gCAAGA,GAAHA,UAAIA,SAAgBA,EAAEA,QAAeA,EAA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","file":"angular-smarter-models.js","sourcesContent":["/// <reference path=\"../typings/tsd.d.ts\"/>\n\nmodule AngularSmarterModels {\n  export var smModule: ng.IModule = angular.module('sm.models', []);\n}\n","/// <reference path=\"../typings/tsd.d.ts\"/>\n/// <reference path=\"./module.ts\"/>\n\nmodule AngularSmarterModels {\n  export interface ModelWrapper {\n    props: any,\n    config: any,\n  }\n}\n","/// <reference path=\"../typings/tsd.d.ts\"/>\n/// <reference path=\"./module.ts\"/>\n/// <reference path=\"./model-wrapper.ts\"/>\n\nmodule AngularSmarterModels {\n  export interface ModelInstanceConfig {\n    rawModel: any,\n    modelPath: string,\n    modelDataRetriever: ModelDataRetriever,\n    listPath: string,\n    idField: string,\n  }\n\n  export class ModelInstance implements ModelWrapper {\n    constructor(public config:ModelInstanceConfig) {\n      if (!angular.isObject(this.config.rawModel)) {\n        this.config.rawModel = {};\n      }\n    }\n\n    get props() {\n      return this.config.rawModel;\n    }\n\n    serialize():string {\n      return JSON.stringify(this.config.rawModel);\n    }\n\n    merge(src):void {\n      angular.extend(this.config.rawModel, src);\n    }\n\n    setModelPath(path):void {\n      this.config.modelPath = path;\n    }\n\n    getModelPath():string {\n      return this.config.modelPath;\n    }\n\n    save():ng.IPromise<void> {\n      return this.config.modelDataRetriever.save(this);\n    }\n\n    delete():ng.IPromise<void> {\n      return this.config.modelDataRetriever.delete(this.config.modelPath, this.config.listPath, this.config.idField);\n    }\n  }\n\n  smModule.value('SMModelInstance', ModelInstance);\n}\n","/// <reference path=\"./module.ts\"/>\n/// <reference path=\"./model-instance.ts\"/>\n/// <reference path=\"./model-wrapper.ts\"/>\n\nmodule AngularSmarterModels {\n  export interface ModelConfig {\n    modelDataRetriever: ModelDataRetriever,\n    modelPath: string,\n    listPath: string,\n    ModelInstance: any,\n    idField: string\n  }\n\n  export class Model {\n    constructor(private config:ModelConfig) {\n\n    }\n\n    get(params):ModelInstance {\n      return this.config.modelDataRetriever.get(this.config.modelPath, this.config.listPath, params, this.config.ModelInstance, this.config.idField);\n    }\n\n    getAsync(params):ng.IPromise<ModelInstance> {\n      return this.config.modelDataRetriever.getAsync(this.config.modelPath, this.config.listPath, params, this.config.ModelInstance, this.config.idField);\n    }\n\n    list(params):ModelWrapper[] {\n      return this.config.modelDataRetriever.list(this.config.listPath, this.config.modelPath, params, this.config.idField);\n    }\n\n    listAsync(params):ng.IPromise<ModelWrapper[]> {\n      return this.config.modelDataRetriever.listAsync(this.config.listPath, this.config.modelPath, params, this.config.idField);\n    }\n\n    create(params, props):ng.IPromise<ModelInstance> {\n      const createPath = this.config.modelPath.split('/').slice(0, -1).join('/') + '/';\n      return this.config.modelDataRetriever.create(createPath, this.config.listPath, params, new this.config.ModelInstance({\n        rawModel: props,\n        modelDataRetriever: this.config.modelDataRetriever,\n        modelPath: this.config.modelPath,\n        idField: this.config.idField,\n      }));\n    }\n  }\n\n  smModule.value('SMModel', Model);\n}\n","/// <reference path=\"../typings/tsd.d.ts\"/>\n/// <reference path=\"./module.ts\"/>\n/// <reference path=\"./model-wrapper.ts\"/>\n\nmodule AngularSmarterModels {\n  export class ModelListItemInstance implements ModelWrapper {\n    constructor(private _config) {\n\n    }\n\n    get config() {\n      return this._config.config;\n    }\n\n    get props() {\n      return this._config.rawModel;\n    }\n  }\n\n  smModule.value('SMModelListItemInstance', ModelListItemInstance);\n}\n","/// <reference path=\"./module.ts\"/>\n/// <reference path=\"./model-instance.ts\"/>\n/// <reference path=\"./model.ts\"/>\n/// <reference path=\"./model-list-item-instance.ts\"/>\n\nmodule AngularSmarterModels {\n  export class ModelDataRetrieverError extends Error {\n    constructor(message) {\n      super(message);\n      this.name = 'ModelDataRetrieverError';\n    }\n  }\n\n  function buildUrl(path, params) {\n    return path.split('/').map(function(pathComponent) {\n      if (pathComponent[0] === ':') {\n        const subValue = params[pathComponent.slice(1)];\n        if (subValue !== null && subValue !== undefined) {\n          return subValue;\n        }\n        throw new ModelDataRetrieverError(`Missing required param \"${pathComponent.slice(1)}\" for path \"${path}\"!`);\n      }\n      return pathComponent;\n    }).join('/');\n  }\n\n  export class ModelDataRetriever {\n    static $inject: string[] = ['$q', '$http'];\n\n    // TODO: use a weak map for this cache? then we'd cache as long as something in the app/scope\n    // was using the model, but then let it be cleared once garbage collection runs\n    private modelCache: Object;\n    private outstandingRequests: Object;\n    private listCache: Object;\n\n    constructor(private $q: ng.IQService, private $http: ng.IHttpService) {\n      this.modelCache = {};\n      this.outstandingRequests = {};\n      this.listCache = {};\n    }\n\n    private cacheModel(modelUrl: string, listUrl: string, ModelInstance, modelData, identifyingField:string): ModelInstance {\n      const self = this;\n      const modelInstance = new ModelInstance({\n        rawModel: modelData,\n        modelDataRetriever: self,\n        modelPath: modelUrl,\n        listPath: listUrl,\n        idField: identifyingField,\n      });\n      this.modelCache[modelUrl] = modelInstance;\n      this.addModelToList(listUrl, modelInstance, 0);\n      return modelInstance;\n    }\n\n    private cacheList(modelUrl: string, modelData): ModelWrapper[] {\n      this.listCache[modelUrl] = modelData;\n      return modelData;\n    }\n\n    private addModelToList(modelUrl: string, model:ModelWrapper, position:number = 0) {\n      if (this.listCache.hasOwnProperty(modelUrl)) {\n        const modelList = this.listCache[modelUrl];\n        for (let i = 0; i < modelList.length; i++) {\n          if (modelList[i].props[model.config.idField] === model.props[model.config.idField]) {\n            modelList[i] = model;\n            return;\n          }\n        }\n        this.listCache[modelUrl].splice(position, 0, model);\n      }\n    }\n\n    private removeModelFromList(modelUrl: string, modelId: string, identifyingField: string) {\n      const modelList = this.listCache[modelUrl];\n      for (let i = 0; i < modelList.length; i++) {\n        if (modelList[i].props[identifyingField] === modelId) {\n          modelList.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    get(modelPath:string, listPath:string, params, ModelInstance, identifyingField:string):ModelInstance {\n      const modelUrl = buildUrl(modelPath, params);\n      if (this.modelCache.hasOwnProperty(modelUrl)) {\n        return this.modelCache[modelUrl];\n      }\n      this.getAsync(modelPath, listPath, params, ModelInstance, identifyingField);\n    }\n\n    getAsync(modelPath:string, listPath:string, params, ModelInstance, identifyingField:string):ng.IPromise<ModelInstance> {\n      const modelUrl = buildUrl(modelPath, params);\n      let modelPromise;\n      if (this.modelCache.hasOwnProperty(modelUrl)) {\n        modelPromise = this.$q.when(this.modelCache[modelUrl]);\n      } else if (this.outstandingRequests.hasOwnProperty(modelUrl)) {\n        modelPromise = this.outstandingRequests[modelUrl];\n      } else {\n        modelPromise = this.$http.get(modelUrl)\n        .then(response => {\n          return this.cacheModel(modelUrl, listPath, ModelInstance, response.data, identifyingField);\n        })\n        .finally(() => {\n          delete this.outstandingRequests[modelUrl];\n        });\n        this.outstandingRequests[modelUrl] = modelPromise;\n      }\n      return modelPromise;\n    }\n\n    getMultiple(modelPath:string, listPath:string, params, ModelInstance, identifyingField:string):ng.IPromise<Array<ModelInstance>> {\n      const modelUrl = buildUrl(modelPath, params);\n      let modelPromise;\n      if (this.outstandingRequests.hasOwnProperty(modelUrl)) {\n        modelPromise = this.outstandingRequests[modelUrl];\n      } else {\n        modelPromise = this.$http.get<Array<ModelInstance>>(modelUrl).then(response => {\n          if (!angular.isArray(response.data)) {\n            return this.$q.reject(new ModelDataRetrieverError(`Expected array of models for getMultiple request for path \"${modelUrl}\"!`));\n          }\n          return response.data.map(modelData => {\n            return this.cacheModel(modelUrl + '/' + modelData[identifyingField], listPath, ModelInstance, modelData, identifyingField);\n          });\n        })\n        .finally(() => {\n          delete this.outstandingRequests[modelUrl];\n        });\n        this.outstandingRequests[modelUrl] = modelPromise;\n      }\n      return modelPromise;\n    }\n\n    list(listPath:string, modelPath: string, params, identifyingField:string): ModelWrapper[] {\n      const modelUrl = buildUrl(listPath, params);\n      if (this.listCache.hasOwnProperty(modelUrl)) {\n        return this.listCache[modelUrl];\n      }\n      this.listAsync(listPath, modelPath, params, identifyingField);\n    }\n\n    listAsync(listPath:string, modelPath:string, params, identifyingField:string):ng.IPromise<ModelWrapper[]> {\n      const modelUrl = buildUrl(listPath, params);\n      let modelPromise;\n      if (this.listCache.hasOwnProperty(modelUrl)) {\n        modelPromise = this.$q.when(this.listCache[modelUrl]);\n      } else if (this.outstandingRequests.hasOwnProperty(modelUrl)) {\n        modelPromise = this.outstandingRequests[modelUrl];\n      } else {\n        modelPromise = this.$http.get<ModelWrapper[]>(modelUrl).then(response => {\n          if (!angular.isArray(response.data)) {\n            return this.$q.reject(new ModelDataRetrieverError(`Expected array of models for list request for path \"${modelUrl}\"!`));\n          }\n          const modelList = response.data.map(listItem => {\n            const actualModelParams = {\n              [identifyingField]: listItem[identifyingField]\n            }\n            angular.extend(actualModelParams, params);\n            const actualModelUrl = buildUrl(modelPath, actualModelParams);\n            if (this.modelCache.hasOwnProperty(actualModelUrl)) {\n              return this.modelCache[actualModelUrl];\n            } else {\n              return new ModelListItemInstance({\n                rawModel: listItem,\n                config: {\n                  idField: identifyingField,\n                },\n              });\n            }\n          });\n          return this.cacheList(modelUrl, modelList);\n        })\n        .finally(() => {\n          delete this.outstandingRequests[modelUrl];\n        });\n        this.outstandingRequests[modelUrl] = modelPromise;\n      }\n      return modelPromise;\n    }\n\n    save(model:ModelInstance):ng.IPromise<void> {\n      return this.$http.post<void>(model.getModelPath(), model.serialize()).then(response => {\n          // do nothing, do this to return a standard angular promise instead of an $http one\n      });\n    }\n\n    create(modelPath:string, listPath:string, params, model:ModelInstance):ng.IPromise<ModelInstance> {\n      const modelUrl = buildUrl(modelPath, params);\n      return this.$http.put(modelUrl, model.serialize()).then(response => {\n        model.merge(response.data);\n        this.modelCache[response.headers('Location')] = model;\n        this.addModelToList(listPath, model);\n        return model;\n      });\n    }\n\n    delete(modelPath:string, listPath:string, identifyingField:string):ng.IPromise<void> {\n      let modelId;\n      if (this.modelCache.hasOwnProperty(modelPath)) {\n        modelId = this.modelCache[modelPath].props[identifyingField];\n      }\n      delete this.modelCache[modelPath];\n      return this.$http.delete(modelPath).then(response => {\n        if (modelId != null) {\n          this.removeModelFromList(listPath, modelId, identifyingField);\n        }\n      });\n    }\n  }\n\n  smModule\n    .value('smModelDataRetrieverError', ModelDataRetrieverError)\n    .service('smModelDataRetriever', ModelDataRetriever);\n}\n","/// <reference path=\"./module.ts\"/>\n/// <reference path=\"./model-instance.ts\"/>\n/// <reference path=\"./model.ts\"/>\n/// <reference path=\"./model-data-retriever.ts\"/>\n\nmodule AngularSmarterModels {\n\n  export class ModelBuilder {\n    constructor(private route:string, private _listPath:string, private Model, private ModelInstance, private _modelDataRetriever:ModelDataRetriever, private _idField:string) {\n\n    }\n\n    model(Model):ModelBuilder {\n      this.Model = Model;\n      return this;\n    }\n\n    modelInstance(ModelInstance):ModelBuilder {\n      this.ModelInstance = ModelInstance;\n      return this;\n    }\n\n    modelDataRetriever(modelDataRetriever):ModelBuilder {\n      this._modelDataRetriever = modelDataRetriever;\n      return this;\n    }\n\n    listPath(listPath):ModelBuilder {\n      this._listPath = listPath;\n      return this;\n    }\n\n    idField(fieldName):ModelBuilder {\n      this._idField = fieldName;\n      return this;\n    }\n\n    done():Model {\n      return new this.Model({\n        modelPath: this.route,\n        ModelInstance: this.ModelInstance,\n        modelDataRetriever: this._modelDataRetriever,\n        listPath: this._listPath,\n        idField: this._idField,\n      });\n    }\n  }\n\n  export interface modelBuilder {\n    (route: string, listPath:string): ModelBuilder;\n  }\n\n  function modelFactory(SMModel, SMModelInstance, smModelDataRetriever):modelBuilder {\n    var service:modelBuilder = function(route:string, listPath:string):ModelBuilder {\n      return new ModelBuilder(route, listPath, SMModel, SMModelInstance, smModelDataRetriever, 'id');\n    };\n    return service;\n  }\n\n  modelFactory.$inject = ['SMModel', 'SMModelInstance', 'smModelDataRetriever'];\n\n  angular.module('sm.models').factory('smModelFactory', modelFactory);\n}\n"],"sourceRoot":"/source/"}